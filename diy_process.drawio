<mxfile host="app.diagrams.net" modified="2022-11-21T12:05:17.213Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36" etag="JU1GxohBZO-v6y1DBdA3" version="20.5.3" type="github">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="1105" dy="848" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-2" value="" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;arcSize=16;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="220" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-3" value="组件创建之初" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;arcSize=16;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="80" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-4" value="Yes" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;arcSize=16;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1">
          <mxGeometry y="20" relative="1" as="geometry">
            <mxPoint as="offset" />
            <mxPoint x="220" y="240" as="sourcePoint" />
            <mxPoint x="220" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-12" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;1.隐藏和显示对应的拖拽元素&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;2.设置裁剪中心&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;3.设置放大倍数&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;arcSize=16;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="448" y="270" width="250" height="100" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-0" value="" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;arcSize=16;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-1" target="ORRfzwTu0XoRiEWHrFj2-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-1" value="提交纹理的过程&lt;br&gt;handleSave" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;arcSize=16;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="126.25" y="1248" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-2" value="Yes" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;arcSize=16;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-4">
          <mxGeometry y="20" relative="1" as="geometry">
            <mxPoint as="offset" />
            <mxPoint x="186.25" y="1648" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-4" target="ORRfzwTu0XoRiEWHrFj2-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-4" target="ORRfzwTu0XoRiEWHrFj2-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-4" target="ORRfzwTu0XoRiEWHrFj2-18">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="266.25" y="1378" />
              <mxPoint x="266.25" y="1478" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-4" value="先消费&lt;br&gt;handleConsume" style="rhombus;whiteSpace=wrap;html=1;shadow=0;fontFamily=Helvetica;fontSize=12;align=center;strokeWidth=1;spacing=6;spacingTop=-4;arcSize=16;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="136.25" y="1338" width="100" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-5" target="ORRfzwTu0XoRiEWHrFj2-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-5" target="ORRfzwTu0XoRiEWHrFj2-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-5" value="金币支付" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;arcSize=16;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="296.25" y="1268" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-7" value="s" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;arcSize=16;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" target="ORRfzwTu0XoRiEWHrFj2-10">
          <mxGeometry y="10" relative="1" as="geometry">
            <mxPoint as="offset" />
            <mxPoint x="236.25" y="1675" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-9" target="ORRfzwTu0XoRiEWHrFj2-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-9" value="把当前的所有元素转化为图片&lt;br&gt;&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;convertAllToImg&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;arcSize=16;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="110" y="1748" width="162.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-10" value="strSafeUrl 非空跳转实名认证页面" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;arcSize=16;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="356.25" y="1653" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-12" value="金币不足需要拉起窗口" style="whiteSpace=wrap;html=1;rounded=1;glass=0;strokeWidth=1;shadow=0;arcSize=16;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="486.25" y="1178" width="155" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-15" value="钻石支付" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;arcSize=16;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="301.25" y="1358" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-18" value="音贝支付" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;arcSize=16;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="301.25" y="1458" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-20">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="186.25" y="1648" as="targetPoint" />
            <Array as="points">
              <mxPoint x="676.25" y="1288" />
              <mxPoint x="676.25" y="1578" />
              <mxPoint x="186.25" y="1578" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-20" value="支付成功的时候需要根据返回的结果显示对应的弹窗" style="whiteSpace=wrap;html=1;rounded=1;glass=0;strokeWidth=1;shadow=0;arcSize=16;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="486.25" y="1263" width="155" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-24" target="ORRfzwTu0XoRiEWHrFj2-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-24" value="返回体" style="whiteSpace=wrap;html=1;rounded=1;glass=0;strokeWidth=1;shadow=0;arcSize=16;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="126.25" y="1648" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-28">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="596.25" y="1778" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-28" target="ORRfzwTu0XoRiEWHrFj2-43">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-28" value="把拖拽元素的都还原到对应的纹理区域&lt;br&gt;&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;resetImagePos&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;glass=0;strokeWidth=1;shadow=0;arcSize=16;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="401.25" y="1748" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-35" value="如何还原坐标" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="606.25" y="1718" width="430" height="170" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-36" value="1. 拖拽元素load阶段：拖拽元素load的时候记录拖拽元素最初的位置" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="ORRfzwTu0XoRiEWHrFj2-35">
          <mxGeometry y="30" width="430" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-37" value="2.拖拽元素还原的阶段：获取拖拽元素当前的屏幕位置，然后投影为纹理区域对应的位置，在纹理空间进行变化以后，再反投影出当前拖拽元素实际的屏幕位置" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="ORRfzwTu0XoRiEWHrFj2-35">
          <mxGeometry y="60" width="430" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-38" value="3.获取到拖拽还原后的坐标后，进行拖拽元素的transform进行最后的变化" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="ORRfzwTu0XoRiEWHrFj2-35">
          <mxGeometry y="90" width="430" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-40" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 12px; line-height: 18px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #c586c0;&quot;&gt;export&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;convertTexturePosToScreenPos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = (&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;texturePos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;: &lt;/span&gt;&lt;span style=&quot;color: #4ec9b0;&quot;&gt;Vector3&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;,&amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;stage&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;: &lt;/span&gt;&lt;span style=&quot;color: #4ec9b0;&quot;&gt;Stage&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; { &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;scene&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;camera&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;engine&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; } = &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;stage&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #6a9955;&quot;&gt;// 需要加上canvas上面的高度才是视图窗口的实际位置s&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;canvasPos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;document&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;&quot;mod_canvas&quot;&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;)[&lt;/span&gt;&lt;span style=&quot;color: #b5cea8;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;].&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;getBoundingClientRect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #6a9955;&quot;&gt;// 从纹理的位置转化到viewport的位置&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;viewPos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;new&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4ec9b0;&quot;&gt;Vector3&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;((&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;texturePos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;x&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; - &lt;/span&gt;&lt;span style=&quot;color: #b5cea8;&quot;&gt;0.5&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;) * ( -&lt;/span&gt;&lt;span style=&quot;color: #b5cea8;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;), &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;texturePos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;y&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; - &lt;/span&gt;&lt;span style=&quot;color: #b5cea8;&quot;&gt;0.5&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;texturePos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;z&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;pos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = &lt;/span&gt;&lt;span style=&quot;color: #4ec9b0;&quot;&gt;Vector3&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;Project&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;viewPos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #4ec9b0;&quot;&gt;Matrix&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;Identity&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(), &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;scene&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;getTransformMatrix&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(), &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;camera&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;viewport&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;toGlobal&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;engine&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;getRenderWidth&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(), &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;engine&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;getRenderHeight&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;()))&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;console&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;log&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;&quot;viewPos&quot;&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;viewPos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;screenPos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; =  &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;new&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4ec9b0;&quot;&gt;Vector3&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;pos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;x&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;pos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;y&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; + &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;canvasPos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;y&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;pos&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;z&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #c586c0;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;screenPos&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1056.25" y="1668" width="500" height="500" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-41" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #6a9955;&quot;&gt;// 屏幕空间转化到纹理空间&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #c586c0;&quot;&gt;export&lt;/span&gt; &lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #dcdcaa;&quot;&gt;convertScreenPosToTexturePos&lt;/span&gt; = (&lt;span style=&quot;color: #9cdcfe;&quot;&gt;screenPos&lt;/span&gt;: &lt;span style=&quot;color: #4ec9b0;&quot;&gt;Vector3&lt;/span&gt;, &lt;span style=&quot;color: #9cdcfe;&quot;&gt;stage&lt;/span&gt;: &lt;span style=&quot;color: #4ec9b0;&quot;&gt;Stage&lt;/span&gt;) &lt;span style=&quot;color: #569cd6;&quot;&gt;=&amp;gt;&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt; { &lt;span style=&quot;color: #4fc1ff;&quot;&gt;engine&lt;/span&gt;, &lt;span style=&quot;color: #4fc1ff;&quot;&gt;scene&lt;/span&gt;} =  &lt;span style=&quot;color: #9cdcfe;&quot;&gt;stage&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #4fc1ff;&quot;&gt;ch&lt;/span&gt; = &lt;span style=&quot;color: #4fc1ff;&quot;&gt;engine&lt;/span&gt;.&lt;span style=&quot;color: #dcdcaa;&quot;&gt;getRenderHeight&lt;/span&gt;();&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #4fc1ff;&quot;&gt;cw&lt;/span&gt; = &lt;span style=&quot;color: #4fc1ff;&quot;&gt;engine&lt;/span&gt;.&lt;span style=&quot;color: #dcdcaa;&quot;&gt;getRenderWidth&lt;/span&gt;();&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #4fc1ff;&quot;&gt;matrix&lt;/span&gt; = &lt;span style=&quot;color: #4ec9b0;&quot;&gt;Matrix&lt;/span&gt;.&lt;span style=&quot;color: #dcdcaa;&quot;&gt;Identity&lt;/span&gt;();&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #4fc1ff;&quot;&gt;viewMatrix&lt;/span&gt; = &lt;span style=&quot;color: #4fc1ff;&quot;&gt;scene&lt;/span&gt;.&lt;span style=&quot;color: #dcdcaa;&quot;&gt;getViewMatrix&lt;/span&gt;();&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #4fc1ff;&quot;&gt;projectionMatrix&lt;/span&gt; = &lt;span style=&quot;color: #4fc1ff;&quot;&gt;scene&lt;/span&gt;.&lt;span style=&quot;color: #dcdcaa;&quot;&gt;getProjectionMatrix&lt;/span&gt;();&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: #6a9955;&quot;&gt;// 需要减去canvas上面的高度才是canvas窗口的实际位置&lt;/span&gt;&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #4fc1ff;&quot;&gt;canvasPos&lt;/span&gt; = &lt;span style=&quot;color: #9cdcfe;&quot;&gt;document&lt;/span&gt;.&lt;span style=&quot;color: #dcdcaa;&quot;&gt;getElementsByClassName&lt;/span&gt;(&lt;span style=&quot;color: #ce9178;&quot;&gt;&quot;mod_canvas&quot;&lt;/span&gt;)[&lt;span style=&quot;color: #b5cea8;&quot;&gt;0&lt;/span&gt;].&lt;span style=&quot;color: #dcdcaa;&quot;&gt;getBoundingClientRect&lt;/span&gt;();&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: #6a9955;&quot;&gt;// 计算从屏幕空间到板子空间的位置&lt;/span&gt;&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #4fc1ff;&quot;&gt;pos&lt;/span&gt; = &lt;span style=&quot;color: #4ec9b0;&quot;&gt;Vector3&lt;/span&gt;.&lt;span style=&quot;color: #dcdcaa;&quot;&gt;Unproject&lt;/span&gt;(&lt;span style=&quot;color: #569cd6;&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color: #4ec9b0;&quot;&gt;Vector3&lt;/span&gt;(&lt;span style=&quot;color: #9cdcfe;&quot;&gt;screenPos&lt;/span&gt;.&lt;span style=&quot;color: #9cdcfe;&quot;&gt;x&lt;/span&gt; * &lt;span style=&quot;color: #b5cea8;&quot;&gt;2&lt;/span&gt;, (&lt;span style=&quot;color: #9cdcfe;&quot;&gt;screenPos&lt;/span&gt;.&lt;span style=&quot;color: #9cdcfe;&quot;&gt;y&lt;/span&gt; - &lt;span style=&quot;color: #4fc1ff;&quot;&gt;canvasPos&lt;/span&gt;.&lt;span style=&quot;color: #9cdcfe;&quot;&gt;y&lt;/span&gt;)* &lt;span style=&quot;color: #b5cea8;&quot;&gt;2&lt;/span&gt;, &lt;span style=&quot;color: #b5cea8;&quot;&gt;0&lt;/span&gt;), &lt;span style=&quot;color: #4fc1ff;&quot;&gt;cw&lt;/span&gt;, &lt;span style=&quot;color: #4fc1ff;&quot;&gt;ch&lt;/span&gt;, &lt;span style=&quot;color: #4fc1ff;&quot;&gt;matrix&lt;/span&gt;, &lt;span style=&quot;color: #4fc1ff;&quot;&gt;viewMatrix&lt;/span&gt;, &lt;span style=&quot;color: #4fc1ff;&quot;&gt;projectionMatrix&lt;/span&gt;)&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: #6a9955;&quot;&gt;// 从板子的位置转化到板子的纹理&lt;/span&gt;&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #4fc1ff;&quot;&gt;texturePos&lt;/span&gt; = &lt;span style=&quot;color: #569cd6;&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color: #4ec9b0;&quot;&gt;Vector3&lt;/span&gt;(-&lt;span style=&quot;color: #4fc1ff;&quot;&gt;pos&lt;/span&gt;.&lt;span style=&quot;color: #9cdcfe;&quot;&gt;x&lt;/span&gt; + &lt;span style=&quot;color: #b5cea8;&quot;&gt;0.5&lt;/span&gt;, &lt;span style=&quot;color: #4fc1ff;&quot;&gt;pos&lt;/span&gt;.&lt;span style=&quot;color: #9cdcfe;&quot;&gt;y&lt;/span&gt; + &lt;span style=&quot;color: #b5cea8;&quot;&gt;0.5&lt;/span&gt;, &lt;span style=&quot;color: #4fc1ff;&quot;&gt;pos&lt;/span&gt;.&lt;span style=&quot;color: #9cdcfe;&quot;&gt;z&lt;/span&gt;)&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: #c586c0;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: #4fc1ff;&quot;&gt;texturePos&lt;/span&gt;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1046.25" y="1388" width="560" height="335" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=11;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-43" target="ORRfzwTu0XoRiEWHrFj2-46">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-43" value="由于拖拽元素是可以拖拽改变大小的，所以需要重新生成纹理图片&lt;br&gt;&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;convertImagetoTexture&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;glass=0;strokeWidth=1;shadow=0;arcSize=16;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="368.75" y="1928" width="185" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-45" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; line-height: 18px; font-size: 11px;&quot;&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;    &lt;span style=&quot;color: rgb(197, 134, 192); font-size: 11px;&quot;&gt;if&lt;/span&gt; (vUV.x &amp;gt;= imageX1 &amp;amp;&amp;amp; vUV.y &amp;lt;= imageY1 &amp;amp;&amp;amp; vUV.x &amp;lt;= imageX2 &amp;amp;&amp;amp; vUV.y &amp;gt;= imageY2) {&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;      &lt;span style=&quot;color: rgb(86, 156, 214); font-size: 11px;&quot;&gt;vec2&lt;/span&gt; normalizeCor = &lt;span style=&quot;color: rgb(86, 156, 214); font-size: 11px;&quot;&gt;vec2&lt;/span&gt;((vUV.x - imageX1) / (imageX2 - imageX1), (vUV.y- imageY2) / (imageY1 - imageY2));&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;      &lt;span style=&quot;color: rgb(86, 156, 214); font-size: 11px;&quot;&gt;vec3&lt;/span&gt; mask = &lt;span style=&quot;color: rgb(220, 220, 170); font-size: 11px;&quot;&gt;texture2D&lt;/span&gt;(maskTex, normalizeCor).rgb;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;      &lt;span style=&quot;color: rgb(86, 156, 214); font-size: 11px;&quot;&gt;float&lt;/span&gt; alpha = &lt;span style=&quot;color: rgb(220, 220, 170); font-size: 11px;&quot;&gt;texture2D&lt;/span&gt;(maskTex, normalizeCor).a;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;      &lt;span style=&quot;color: rgb(86, 156, 214); font-size: 11px;&quot;&gt;vec3&lt;/span&gt; color = main.rgb * (&lt;span style=&quot;color: rgb(181, 206, 168); font-size: 11px;&quot;&gt;1.0&lt;/span&gt; - alpha) + mask * alpha;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;      &lt;span style=&quot;color: rgb(156, 220, 254); font-size: 11px;&quot;&gt;gl_FragColor&lt;/span&gt; = &lt;span style=&quot;color: rgb(86, 156, 214); font-size: 11px;&quot;&gt;vec4&lt;/span&gt;(color, main.a);&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;    } &lt;span style=&quot;color: rgb(197, 134, 192); font-size: 11px;&quot;&gt;else&lt;/span&gt; {&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;      &lt;span style=&quot;color: rgb(156, 220, 254); font-size: 11px;&quot;&gt;gl_FragColor&lt;/span&gt; = &lt;span style=&quot;color: rgb(220, 220, 170); font-size: 11px;&quot;&gt;texture2D&lt;/span&gt;(mainTex, vUV);&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;    }&lt;/div&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="616.25" y="1978" width="360" height="160" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-46" value="&lt;span style=&quot;background-color: rgb(248, 249, 250);&quot;&gt;然后拖拽元素图片的坐标和图片传入shader进行渲染&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;glass=0;strokeWidth=1;shadow=0;arcSize=16;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="368.75" y="2088" width="185" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-50" value="提取纹理分区的信息&lt;br&gt;初始化相机的参数&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;arcSize=16;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="160" y="170" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ORRfzwTu0XoRiEWHrFj2-51" target="WIyWlLk6GJQsqaUBKTNV-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-51" value="&lt;span style=&quot;font-size: 12px;&quot;&gt;通过纹理的分区取样进行视角的切换&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="160" y="280" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ORRfzwTu0XoRiEWHrFj2-54" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; line-height: 18px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;  #if&lt;/span&gt; CLIP == &lt;span style=&quot;color: #b5cea8;&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div&gt;      &lt;span style=&quot;color: #9cdcfe;&quot;&gt;gl_FragColor&lt;/span&gt; = &lt;span style=&quot;color: #dcdcaa;&quot;&gt;texture2D&lt;/span&gt;(mainTex, &lt;span style=&quot;color: #569cd6;&quot;&gt;vec2&lt;/span&gt;(vUV.x  * xScale + clipPosition.x, vUV.y  * yScale + clipPosition.y)).rgba;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;  #endif&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="730" y="305" width="450" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
